<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Alquiler para fiestas</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/formularios.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
</head>
<body>

<nav th:replace="/fragments/navbar :: nav"></nav>
<div th:insert="/fragments/msg :: msg"></div>

<br><br><br>
<div class="card-container">
    <div class="card">
        <h3 class="card-title">Reservar Inmueble</h3>
        <form th:action="@{/reserva/alta/}" method="post">
            <input class="form-control" type="hidden" th:name="idInmueble" th:value="${idInmueble}"/>

            <label for="fechaAlta">Fecha de Entrada:</label>
            <section class="col-sm-12">
                <div class="form-group">
                    <div class='input-group date' id='datepicker1'>
                        <input type='text' class="form-control" title="in" id="fechaAlta" name="fechaAlta" required/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>

            </section>

            <!--<input class="form-control" type="date" id="fechaAlta" name="fechaAlta" required />-->

            <label for="fechaBaja">Fecha de Salida:</label>
            <section class="col-sm-12">
                <div class="form-group">
                    <div class='input-group date' id='datepicker2'>
                        <input type='text' class="form-control" title="out" id="fechaBaja" name="fechaBaja" required/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>

            </section>
            <!--<input class="form-control" type="date" id="fechaBaja" name="fechaBaja" required />-->

            <input class="form-control" type="hidden" th:name="idCliente" th:value="${cliente.id}"/>

            <button type="submit" class="boton">Reservar</button>
        </form>
    </div>
</div>

<input TYPE="hidden" th:value="${inmu}" id="lista_alta"/>
<br><br><br>

<footer th:replace="/fragments/footer :: footer"></footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">

    $(function () {
        // Lógica de disponibilidad (arreglo de fechas ocupadas)
        var fechasOcupadas = [];

        // Fechas a deshabilitar
        var listaFechas = document.getElementById("lista_alta");

        console.log(listaFechas.value);

        var fechasDeshabilitadas = listaFechas.value;


        $('#datepicker1').datepicker({
            language: 'es', // Establecer idioma en español
            startDate: new Date(), // Evitar seleccionar fechas anteriores a hoy
            beforeShowDay: function (date) {
                var dateString = moment(date).format('DD-MM-YYYY');
                if (fechasOcupadas.indexOf(dateString) !== -1) {
                    // Establecer clase para fechas ocupadas
                    return [false, 'fechas-ocupadas'];
                } else {
                    // Establecer clase para fechas disponibles
                    return [true, 'fechas-disponibles'];
                }
            },
            datesDisabled: fechasDeshabilitadas // Deshabilitar fechas específicas
        });

        $('#datepicker2').datepicker({
            language: 'es', // Establecer idioma en español
            startDate: new Date(), // Evitar seleccionar fechas anteriores a hoy
            beforeShowDay: function (date) {
                var dateString = moment(date).format('DD-MM-YYYY');
                if (fechasOcupadas.indexOf(dateString) !== -1) {
                    // Establecer clase para fechas ocupadas
                    return [false, 'fechas-ocupadas'];
                } else {
                    // Establecer clase para fechas disponibles
                    return [true, 'fechas-disponibles'];
                }
            },
            datesDisabled: fechasDeshabilitadas // Deshabilitar fechas específicas
        });
    });
</script>
</body>
</html>